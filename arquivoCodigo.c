#pragma config(Sensor, S1,     lightSensor,    sensorCOLORFULL)
#pragma config(Sensor, S2,     sonarSensor,    sensorSONAR)
#pragma config(Sensor, S4,     touchSensor,    sensorTouch);
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

void verificarLinha(){
    if (SensorValue(S1)==BLACKCOLOR){
      motor[motorA] = -100;
      motor[motorB] = -100;
      wait10Msec(100);
      motor[motorA] = 30;
      motor[motorB] = -30;
      wait10Msec(100);
    };

};
void procurarInimigo(){
  while(true){

   if (SensorValue(S2)<50){
      break;
    }
    else{
      motor[motorA] = 100;
      motor[motorB] = -100;
    //
    wait1Msec(100);
  }
  }
}

void toque(){
  while(true){
     motor[motorA] = 50;
     motor[motorB] = 50;
     if(SensorValue(S4) == 1 && sensorValue(S1)!=BLACKCOLOR){
        while(SensorValue(S4) == 1 && sensorValue(S1)!=BLACKCOLOR ){
          motor[motorA] = 100;
          motor[motorB] = 100;
          nMotorEncoder[motorC] = 10;
        }

     }
     if(sensorValue(S1)==BLACKCOLOR){

	       break;

	   }
     wait1Msec(100);
   }
}

task main(){
    nMotorEncoder[motorC] = 7;
    procurarInimigo();
	  while(true){

	    if(SensorValue(S2)>=0){
	       if(sensorValue(S1)==BLACKCOLOR){
	          verificarLinha();
	       }
	       if(SensorValue(S2)<50){
	        toque();

	      }
	    }

	    wait1Msec(10);
	  }
  }
